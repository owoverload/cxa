!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.stream=e():t.stream=e()}(window,function(){return function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist/",i(i.s=125)}([function(t,e,n){"use strict";t.exports=function(t,e,n){if(!e)return t;for(var r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&!1===n||t[r]!==e[r]&&(t[r]=e[r]));return t}},function(t,e,n){"use strict";var i=n(0);t.exports=function(t,e){"function"!=typeof t&&(e=t,t=Object);var n=function(){return this.initialize&&this.initialize.apply(this,arguments)||this},r=function(){};return r.prototype=t.prototype,n.prototype=new r,i(n.prototype,e),n}},function(H,I){var J;J=function(){return this}();try{J=J||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(J=window)}H.exports=J},function(t,e,n){"use strict";t.exports={isURI:function(t){return t&&t.protocol&&t.host&&t.path},isSameOrigin:function(t){return t.protocol===location.protocol&&t.hostname===location.hostname&&t.port===location.port},parse:function(n){if("string"!=typeof n)return n;var t,e,r,i,o,s,a={},c=function(e,t){n=n.replace(t,function(t){return a[e]=t,""}),a[e]=a[e]||""};for(c("protocol",/^[a-z]+\:/i),c("host",/^\/\/[^\/\?#]+/),/^\//.test(n)||a.host||(n=location.pathname.replace(/[^\/]*$/,"")+n),c("pathname",/^[^\?#]*/),c("search",/^\?[^#]*/),c("hash",/^#.*/),a.protocol=a.protocol||location.protocol,a.host?(a.host=a.host.substr(2),t=a.host.split(":"),a.hostname=t[0],a.port=t[1]||""):(a.host=location.host,a.hostname=location.hostname,a.port=location.port),a.pathname=a.pathname||"/",a.path=a.pathname+a.search,s={},i=0,o=(r=(e=a.search.replace(/^\?/,""))?e.split("&"):[]).length;i<o;i++)t=r[i].split("="),s[decodeURIComponent(t[0]||"")]=decodeURIComponent(t[1]||"");return a.query=s,a.href=this.stringify(a),a},stringify:function(t){var e=t.protocol+"//"+t.hostname;return t.port&&(e+=":"+t.port),e+=t.pathname+this.queryString(t.query)+(t.hash||"")},queryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return 0===e.length?"":"?"+e.join("&")}}},function(t,e){var n=t.exports,r="function"==typeof Error.captureStackTrace,i=!!(new Error).stack;function o(t,e){this.message=t,Error.call(this,this.message),r?Error.captureStackTrace(this,e):this.stack=i?(new Error).stack:""}(n._Abstract=o).prototype=new Error,n.FeedError=function(t){o.call(this,t)},n.FeedError.prototype=new o,n.SiteError=function(t){o.call(this,t)},n.SiteError.prototype=new o,n.MissingSchemaError=function(t){o.call(this,t)},n.MissingSchemaError.prototype=new o,n.StreamApiError=function(t,e,n){this.error=e,this.response=n,o.call(this,t)},n.StreamApiError.prototype=new o},function(u,t,f){"use strict";(function(s){var t=f(1),a=f(37).Cookie,n=f(9),h=f(3),l=f(19),r=f(0),e=f(8),i=f(98),o=f(39),c=r(t({className:"Transport",DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(t,e){this._dispatcher=t,this.endpoint=e,this._outbox=[],this._proxy=r({},this._dispatcher.proxy),this._proxy.origin||(this._proxy.origin=this._findProxy())},close:function(){},encode:function(t){return""},sendMessage:function(t){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,h.stringify(this.endpoint),t),this.batching?(this._outbox.push(t),this._flushLargeBatch(),t.channel===o.HANDSHAKE?this._publish(.01):(t.channel===o.CONNECT&&(this._connectMessage=t),this._publish(this.MAX_DELAY))):n.resolve(this.request([t]))},_makePromise:function(){var e=this;this._requestPromise=this._requestPromise||new n(function(t){e._resolvePromise=t})},_publish:function(t){return this._makePromise(),this.addTimeout("publish",t,function(){this._flush(),delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout("publish"),1<this._outbox.length&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this._resolvePromise(this.request(this._outbox)),this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){if(!(this.encode(this._outbox).length<this._dispatcher.maxRequestSize)){var t=this._outbox.pop();this._makePromise(),this._flush(),t&&this._outbox.push(t)}},_receive:function(t){if(t){t=[].concat(t),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,h.stringify(this.endpoint),this.connectionType,t);for(var e=0,n=t.length;e<n;e++)this._dispatcher.handleResponse(t[e])}},_handleError:function(t,e){t=[].concat(t),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,h.stringify(this.endpoint),this.connectionType,t);for(var n=0,r=t.length;n<r;n++)this._dispatcher.handleError(t[n])},_getCookies:function(){var t=this._dispatcher.cookies,e=h.stringify(this.endpoint);return t?l.map(t.getCookiesSync(e),function(t){return t.cookieString()}).join("; "):""},_storeCookies:function(t){var e,n=this._dispatcher.cookies,r=h.stringify(this.endpoint);if(t&&n)for(var i=0,o=(t=[].concat(t)).length;i<o;i++)e=a.parse(t[i]),n.setCookieSync(e,r)},_findProxy:function(){if(void 0!==s){var t=this.endpoint.protocol;if(t){var e,n,r=t.replace(/:$/,"").toLowerCase()+"_proxy",i=r.toUpperCase(),o=s.env;return"http_proxy"===r&&o.REQUEST_METHOD?(1===(e=Object.keys(o).filter(function(t){return/^http_proxy$/i.test(t)})).length?e[0]===r&&void 0===o[i]&&(n=o[r]):1<e.length&&(n=o[r]),n=n||o["CGI_"+i]):(n=o[r]||o[i])&&!o[r]&&console.warn("The environment variable "+i+" is discouraged. Use "+r+"."),n}}}}),{get:function(o,s,a,c,u){var t=o.endpoint;l.asyncEach(this._transports,function(t,n){var e=t[0],r=t[1],i=o.endpointFor(e);return 0<=l.indexOf(a,e)?n():l.indexOf(s,e)<0?(r.isUsable(o,i,function(){}),n()):void r.isUsable(o,i,function(t){if(!t)return n();var e=r.hasOwnProperty("create")?r.create(o,i):new r(o,i);c.call(u,e)})},function(){throw new Error("Could not find a usable connection type for "+h.stringify(t))})},register:function(t,e){this._transports.push([t,e]),e.prototype.connectionType=t},getConnectionTypes:function(){return l.map(this._transports,function(t){return t[0]})},_transports:[]});r(c.prototype,e),r(c.prototype,i),u.exports=c}).call(this,f(23))},function(t,e,n){"use strict";(function(r){var i=n(9);t.exports={then:function(t,e){var n=this;return this._promise||(this._promise=new i(function(t,e){n._resolve=t,n._reject=e})),0===arguments.length?this._promise:this._promise.then(t,e)},callback:function(e,n){return this.then(function(t){e.call(n,t)})},errback:function(e,n){return this.then(null,function(t){e.call(n,t)})},timeout:function(t,e){this.then();var n=this;this._timer=r.setTimeout(function(){n._reject(e)},1e3*t)},setDeferredStatus:function(t,e){this._timer&&r.clearTimeout(this._timer),this.then(),"succeeded"===t?this._resolve(e):"failed"===t?this._reject(e):delete this._promise}}}).call(this,n(2))},function(t,e,n){"use strict";t.exports=function(t){return JSON.stringify(t,function(t,e){return this[t]instanceof Array?this[t]:e})}},function(t,e,n){"use strict";var a=n(7),c={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(t,e){var n=c.logger||(c.wrapper||c).logger;if(n){var r=Array.prototype.slice.apply(t),i="[Faye",o=this.className,s=r.shift().replace(/\?/g,function(){try{return a(r.shift())}catch(t){return"[Object]"}});o&&(i+="."+o),i+="] ","function"==typeof n[e]?n[e](i+s):"function"==typeof n&&n(i+s)}}};for(var r in c.LOG_LEVELS)!function(t){c[t]=function(){this.writeLog(arguments,t)}}(r);t.exports=c},function(t,e,n){"use strict";var r=n(41),i=function(t){return t},o=function(t){throw t},s=function(t){if(this._state=0,this._onFulfilled=[],this._onRejected=[],"function"==typeof t){var e=this;t(function(t){l(e,t)},function(t){d(e,t)})}};s.prototype.then=function(t,e){var n=new s;return a(this,t,n),c(this,e,n),n},s.prototype.catch=function(t){return this.then(null,t)};var a=function(t,e,n){"function"!=typeof e&&(e=i);var r=function(t){u(e,t,n)};0===t._state?t._onFulfilled.push(r):1===t._state&&r(t._value)},c=function(t,e,n){"function"!=typeof e&&(e=o);var r=function(t){u(e,t,n)};0===t._state?t._onRejected.push(r):2===t._state&&r(t._reason)},u=function(t,e,n){r(function(){h(t,e,n)})},h=function(t,e,n){var r;try{r=t(e)}catch(t){return d(n,t)}r===n?d(n,new TypeError("Recursive promise chain detected")):l(n,r)},l=function(e,t){var n,r,i=!1;try{if(n=typeof t,"function"!=typeof(r=null!==t&&("function"===n||"object"===n)&&t.then))return f(e,t);r.call(t,function(t){i^(i=!0)&&l(e,t)},function(t){i^(i=!0)&&d(e,t)})}catch(t){if(!(i^(i=!0)))return;d(e,t)}},f=function(t,e){if(0===t._state){t._state=1,t._value=e,t._onRejected=[];for(var n,r=t._onFulfilled;n=r.shift();)n(e)}},d=function(t,e){if(0===t._state){t._state=2,t._reason=e,t._onFulfilled=[];for(var n,r=t._onRejected;n=r.shift();)n(e)}};s.resolve=function(n){return new s(function(t,e){t(n)})},s.reject=function(n){return new s(function(t,e){e(n)})},s.all=function(e){return new s(function(n,r){var t,i=[],o=e.length;if(0===o)return n(i);for(t=0;t<o;t++)!function(t,e){s.resolve(t).then(function(t){i[e]=t,0==--o&&n(i)},r)}(e[t],t)})},s.race=function(i){return new s(function(t,e){for(var n=0,r=i.length;n<r;n++)s.resolve(i[n]).then(t,e)})},s.deferred=s.pending=function(){var n={};return n.promise=new s(function(t,e){n.resolve=t,n.reject=e}),n},t.exports=s},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e){this&&this.fetch;var E,n=function(t){function e(){this.fetch=!1}return e.prototype=t,new e}("undefined"!=typeof self?self:this);E=n,function(a){var n="URLSearchParams"in E,r="Symbol"in E&&"iterator"in Symbol,c="FileReader"in E&&"Blob"in E&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in E,o="ArrayBuffer"in E;if(o)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function p(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:c&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&c&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,n,r=f(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(t,e){t=u(t),e=h(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},l.prototype.delete=function(t){delete this.map[u(t)]},l.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},l.prototype.set=function(t,e){this.map[u(t)]=h(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},l.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},r&&(l.prototype[Symbol.iterator]=l.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(t,e){var n,r,i=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<g.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},v.call(_.prototype),v.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];m.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},a.DOMException=E.DOMException;try{new a.DOMException}catch(t){a.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function T(i,s){return new Promise(function(r,t){var e=new _(i,s);if(e.signal&&e.signal.aborted)return t(new a.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function n(){o.abort()}o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new m(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.onabort=function(){t(new a.DOMException("Aborted","AbortError"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&c&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),e.signal&&(e.signal.addEventListener("abort",n),o.onreadystatechange=function(){4===o.readyState&&e.signal.removeEventListener("abort",n)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})}T.polyfill=!0,E.fetch||(E.fetch=T,E.Headers=l,E.Request=_,E.Response=m),a.Headers=l,a.Request=_,a.Response=m,a.fetch=T}({}),delete n.fetch.polyfill,t.exports=e=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,e.default=n.fetch},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(44),i=n(117),o=n(116),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(22),i=n(4),o=/^[\w]+$/,s=/^[\w-]+$/;function a(t){if(!o.test(t))throw new i.FeedError("Invalid feedSlug, please use letters, numbers or _: "+t);return t}function c(t){if(!s.test(t))throw new i.FeedError("Invalid userId, please use letters, numbers, - or _: "+t);return t}e.validateFeedId=function(t){var e=t.split(":");if(2!==e.length)throw new i.FeedError("Invalid feedId, expected something like user:1 got "+t);var n=e[0],r=e[1];return a(n),c(r),t},e.validateFeedSlug=a,e.validateUserId=c,e.rfc3986=function(t){return t.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},e.isReadableStream=function(t){return"object"===r(t)&&r("function"===t._read)&&r("object"===t._readableState)}},function(t,e,n){"use strict";var i=function(t){var e,n,r;if(t instanceof Array){for(e=[],n=t.length;n--;)e[n]=i(t[n]);return e}if("object"!=typeof t)return t;for(r in e=null===t?null:{},t)e[r]=i(t[r]);return e};t.exports=i},function(t,e,n){"use strict";var r={countListeners:function(t){return this.listeners(t).length},bind:function(t,e,n){var r=Array.prototype.slice,i=function(){e.apply(n,r.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([t,e,n,i]),this.on(t,i)},unbind:function(t,e,n){this._listeners=this._listeners||[];for(var r,i=this._listeners.length;i--;)(r=this._listeners[i])[0]===t&&(!e||r[1]===e&&r[2]===n)&&(this._listeners.splice(i,1),this.removeListener(t,r[3]))}};n(0)(r,n(101).prototype),r.trigger=r.emit,t.exports=r},function(n,t,e){"use strict";(function(t){var e={_registry:[],on:function(t,e,n,r){var i=function(){n.call(r)};t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i),this._registry.push({_element:t,_type:e,_callback:n,_context:r,_handler:i})},detach:function(t,e,n,r){for(var i,o=this._registry.length;o--;)i=this._registry[o],t&&t!==i._element||e&&e!==i._type||n&&n!==i._callback||r&&r!==i._context||(i._element.removeEventListener?i._element.removeEventListener(i._type,i._handler,!1):i._element.detachEvent("on"+i._type,i._handler),this._registry.splice(o,1),i=null)}};void 0!==t.onunload&&e.on(t,"unload",e.detach,e),n.exports={Event:e}}).call(this,e(2))},function(t,e,n){"use strict";t.exports={commonElement:function(t,e){for(var n=0,r=t.length;n<r;n++)if(-1!==this.indexOf(e,t[n]))return t[n];return null},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},map:function(t,e,n){if(t.map)return t.map(e,n);var r=[];if(t instanceof Array)for(var i=0,o=t.length;i<o;i++)r.push(e.call(n||null,t[i],i));else for(var s in t)t.hasOwnProperty(s)&&r.push(e.call(n||null,s,t[s]));return r},filter:function(t,e,n){if(t.filter)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n||null,t[i],i)&&r.push(t[i]);return r},asyncEach:function(t,e,n,r){var i=t.length,o=-1,s=0,a=!1,c=function(){if(s-=1,(o+=1)===i)return n&&n.call(r);e(t[o],u)},u=function(){s+=1,function(){if(!a){for(a=!0;0<s;)c();a=!1}}()};u()}}},function(t,e,n){var s=n(11),a=n(113),r=n(22),c=n(111),i=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/,o=n(110);function u(t){try{return o.atob(function(t){var e=t.length%4;if(!e)return t;for(var n=4-e;n--;)t+="=";return t}(t).replace(/\-/g,"+").replace(/_/g,"/"))}catch(t){if("InvalidCharacterError"===t.name)return;throw t}}function h(t){return function(t){if("object"===r(t))return t;try{return JSON.parse(t)}catch(t){return}}(u(t.split(".",1)[0]))}e.headerFromJWS=h,e.JWTScopeToken=function(t,e,n,r){var i=r||{},o=!i.expireTokens||!i.expireTokens,s={resource:e,action:n};return i.feedId&&(s.feed_id=i.feedId),i.userId&&(s.user_id=i.userId),c.sign(s,t,{algorithm:"HS256",noTimestamp:o})},e.JWTUserSessionToken=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if("string"!=typeof e)throw new TypeError("userId should be a string");var i=a({user_id:e},n),o=s({algorithm:"HS256",noTimestamp:!0},r);return c.sign(i,t,o)},e.isJWTSignature=e.isJWT=function(t){if(null==t||0==t.length)return!1;var e=t.split(" ")[1]||t;return i.test(e)&&!!h(e)}},function(t,e,n){var r=n(43),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(e,t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(t){return n(t)}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(t)}e.exports=r},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],h=!1,l=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&-1<t&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(30),i=n(26);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(14),i=n(10);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(78),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(31);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},function(t,e,n){"use strict";var r=function(t,e){this.message=t,this.options=e,this.attempts=0};n(0)(r.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var t=this.options.attempts,e=this.attempts,n=this.options.deadline,r=(new Date).getTime();return!(void 0!==t&&t<=e)&&!(void 0!==n&&n<r)},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),t.exports=r},function(i,t,s){"use strict";(function(c){var t=s(1),o=s(3),u=s(18),e=s(0),n=s(7),r=e(t(s(5),{encode:function(t){return n(t)},request:function(i){var o,t=this.endpoint.href,s=this;if(c.XMLHttpRequest)o=new XMLHttpRequest;else{if(!c.ActiveXObject)return this._handleError(i);o=new ActiveXObject("Microsoft.XMLHTTP")}o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Pragma","no-cache"),o.setRequestHeader("X-Requested-With","XMLHttpRequest");var e=this._dispatcher.headers;for(var n in e)e.hasOwnProperty(n)&&o.setRequestHeader(n,e[n]);var a=function(){o.abort()};return void 0!==c.onbeforeunload&&u.Event.on(c,"beforeunload",a),o.onreadystatechange=function(){if(o&&4===o.readyState){var t=null,e=o.status,n=o.responseText,r=200<=e&&e<300||304===e||1223===e;if(void 0!==c.onbeforeunload&&u.Event.detach(c,"beforeunload",a),o.onreadystatechange=function(){},o=null,!r)return s._handleError(i);try{t=JSON.parse(n)}catch(t){}t?s._receive(t):s._handleError(i)}},o.send(this.encode(i)),o}}),{isUsable:function(t,e,n,r){var i="ReactNative"===navigator.product||o.isSameOrigin(e);n.call(r,i)}});i.exports=r}).call(this,s(2))},function(t,e,n){"use strict";var r=n(1);t.exports=r({initialize:function(){this._index={}},add:function(t){var e=void 0!==t.id?t.id:t;return!this._index.hasOwnProperty(e)&&(this._index[e]=t,!0)},forEach:function(t,e){for(var n in this._index)this._index.hasOwnProperty(n)&&t.call(e,this._index[n])},isEmpty:function(){for(var t in this._index)if(this._index.hasOwnProperty(t))return!1;return!0},member:function(t){for(var e in this._index)if(this._index[e]===t)return!0;return!1},remove:function(t){var e=void 0!==t.id?t.id:t,n=this._index[e];return delete this._index[e],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}})},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";t.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(17),s=n(38),a=r({initialize:function(t){this.id=this.name=t},push:function(t){this.trigger("message",t)},isUnused:function(){return 0===this.countListeners("message")}});i(a.prototype,o),i(a,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(t){var e=this.parse(t),n=["/**",t],r=e.slice();r[r.length-1]="*",n.push(this.unparse(r));for(var i=1,o=e.length;i<o;i++)(r=e.slice(0,i)).push("**"),n.push(this.unparse(r));return n},isValid:function(t){return s.CHANNEL_NAME.test(t)||s.CHANNEL_PATTERN.test(t)},parse:function(t){return this.isValid(t)?t.split("/").slice(1):null},unparse:function(t){return"/"+t.join("/")},isMeta:function(t){var e=this.parse(t);return e?e[0]===this.META:null},isService:function(t){var e=this.parse(t);return e?e[0]===this.SERVICE:null},isSubscribable:function(t){return this.isValid(t)?!this.isMeta(t)&&!this.isService(t):null},Set:r({initialize:function(){this._channels={}},getKeys:function(){var t=[];for(var e in this._channels)t.push(e);return t},remove:function(t){delete this._channels[t]},hasSubscription:function(t){return this._channels.hasOwnProperty(t)},subscribe:function(t,e){for(var n,r=0,i=t.length;r<i;r++){n=t[r],(this._channels[n]=this._channels[n]||new a(n)).bind("message",e)}},unsubscribe:function(t,e){var n=this._channels[t];return!!n&&(n.unbind("message",e),!!n.isUnused()&&(this.remove(t),!0))},distributeMessage:function(t){for(var e=a.expand(t.channel),n=0,r=e.length;n<r;n++){var i=this._channels[e[n]];i&&i.trigger("message",t)}}})}),t.exports=a},function(t,e){t.exports={VERSION:"1.2.4",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"]}},function(t,e,n){"use strict";var r=n(107),i=[],o=[],s=r.makeRequestCallFromTimer(function(){if(o.length)throw o.shift()});function a(t){var e;(e=i.length?i.pop():new c).task=t,r(e)}function c(){this.task=null}t.exports=a,c.prototype.call=function(){try{this.task.call()}catch(t){a.onerror?a.onerror(t):(o.push(t),s())}finally{this.task=null,i[i.length]=this}}},function(t,e,n){var i=n(11),r=function(){this.initialize.apply(this,arguments)};r.prototype={initialize:function(t,e,n){this.client=t,this.id=e,this.data=void 0,this.full=void 0,this.token=n,this.url="user/"+this.id+"/"},_streamRef:function(){return"SU:".concat(this.id)},ref:function(){return this._streamRef()},delete:function(e){return this.client.delete({url:this.url,signature:this.token}).then(function(t){return e&&e(t),t})},get:function(t,e){var n=this;return this.client.get({url:this.url,signature:this.token,qs:t}).then(function(t){return n.full=i({},t),delete n.full.duration,n.data=n.full.data,e&&e(t),n})},_chooseData:function(t){return void 0!==t?t:void 0!==this.data?this.data:{}},create:function(t,e,n){var r=this;return this.client.post({url:"user/",body:{id:this.id,data:this._chooseData(t)},qs:e,signature:this.token}).then(function(t){return r.full=i({},t),delete r.full.duration,r.data=r.full.data,n&&n(t),r})},update:function(t,e){var n=this;return this.client.put({url:this.url,body:{data:this._chooseData(t)},signature:this.token}).then(function(t){return n.full=i({},t),delete n.full.duration,n.data=n.full.data,e&&e(t),n})},getOrCreate:function(t,e){return this.create(t,{get_or_create:!0},e)},profile:function(t){return this.get({with_follow_counts:!0},t)}},t.exports=r},function(n,t,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;n.exports=e}).call(this,e(2))},function(t,e,n){var r=n(21).Symbol;t.exports=r},function(t,e){var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");l.log={trace:u,debug:u,info:u,warn:u,error:u};function l(t,e){if("function"!=typeof e)throw new Error("Bad callback given: "+e);if(!t)throw new Error("No options given");var n=t.onResponse;if((t="string"==typeof t?{uri:t}:JSON.parse(JSON.stringify(t))).onResponse=n,t.verbose&&(l.log=function(){var t,e,n={},r=["trace","debug","info","warn","error"];for(e=0;e<r.length;e++)n[t=r[e]]=u,"undefined"!=typeof console&&console&&console[t]&&(n[t]=d(console,t));return n}()),t.url&&(t.uri=t.url,delete t.url),!t.uri&&""!==t.uri)throw new Error("options.uri is a required argument");if("string"!=typeof t.uri)throw new Error("options.uri must be a string");for(var r=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],i=0;i<r.length;i++)if(t[r[i]])throw new Error("options."+r[i]+" is not supported");if(t.callback=e,t.method=t.method||"GET",t.headers=t.headers||{},t.body=t.body||null,t.timeout=t.timeout||l.DEFAULT_TIMEOUT,t.headers.host)throw new Error("Options.headers.host is not supported");t.json&&(t.headers.accept=t.headers.accept||"application/json","GET"!==t.method&&(t.headers["content-type"]="application/json"),"boolean"!=typeof t.json?t.body=JSON.stringify(t.json):"string"!=typeof t.body&&null!==t.body&&(t.body=JSON.stringify(t.body)));var o=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")};if(t.qs){var s="string"==typeof t.qs?t.qs:o(t.qs);-1!==t.uri.indexOf("?")?t.uri=t.uri+"&"+s:t.uri=t.uri+"?"+s}if(t.form){if("string"==typeof t.form)throw"form name unsupported";if("POST"===t.method){var a=(t.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(t.headers["content-type"]=a){case"application/x-www-form-urlencoded":t.body=o(t.form).replace(/%20/g,"+");break;case"multipart/form-data":var c=function(t){var e={};e.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+t[r]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e}(t.form);t.body=c.body,t.headers["content-type"]=c.type;break;default:throw new Error("unsupported encoding:"+a)}}}return t.onResponse=t.onResponse||u,!0===t.onResponse&&(t.onResponse=e,t.callback=u),!t.headers.authorization&&t.auth&&(t.headers.authorization="Basic "+function(t){var e,n,r,i,o,s,a,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,l=0,f="",d=[];if(!t)return t;for(;e=t.charCodeAt(h++),n=t.charCodeAt(h++),r=t.charCodeAt(h++),i=(c=e<<16|n<<8|r)>>18&63,o=c>>12&63,s=c>>6&63,a=63&c,d[l++]=u.charAt(i)+u.charAt(o)+u.charAt(s)+u.charAt(a),h<t.length;);switch(f=d.join(""),t.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}(t.auth.username+":"+t.auth.password)),function(e){var n=new h,r=!1,i=function(t){if(navigator&&"ReactNative"===navigator.product)return!1;var e,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{e=location.href}catch(t){(e=document.createElement("a")).href="",e=e.href}var r=n.exec(e.toLowerCase())||[],i=n.exec(t.toLowerCase());return!(!i||i[1]==r[1]&&i[2]==r[2]&&(i[3]||("http:"===i[1]?80:443))==(r[3]||("http:"===r[1]?80:443)))}(e.uri),t="withCredentials"in n;if(f+=1,n.seq_id=f,n.id=f+": "+e.method+" "+e.uri,n._id=n.id,i&&!t){var o=new Error("Browser does not support cross-origin request: "+e.uri);return o.cors="unsupported",e.callback(o,n)}n.timeoutTimer=setTimeout(function(){r=!0;var t=new Error("ETIMEDOUT");return t.code="ETIMEDOUT",t.duration=e.timeout,l.log.error("Timeout",{id:n._id,milliseconds:e.timeout}),e.callback(t,n)},e.timeout);var s={response:!1,loading:!1,end:!1};n.onreadystatechange=function(t){if(r)return l.log.debug("Ignoring timed out state change",{state:n.readyState,id:n.id});l.log.debug("State change",{state:n.readyState,id:n.id,timed_out:r}),1===n.readyState?l.log.debug("Request started",{id:n.id}):2===n.readyState?c():3===n.readyState?(c(),u()):4===n.readyState&&(c(),u(),function(){if(!s.end){if(s.end=!0,l.log.debug("Request done",{id:n.id}),n.body=n.responseText,e.json)try{n.body=JSON.parse(n.responseText)}catch(t){return e.callback(t,n)}e.callback(null,n,n.body)}}())},n.open(e.method,e.uri,!0),i&&(n.withCredentials=!!e.withCredentials);for(var a in e.headers)n.setRequestHeader(a,e.headers[a]);return n.send(e.body),n;function c(){if(!s.response){if(s.response=!0,l.log.debug("Got response",{id:n.id,status:n.status}),clearTimeout(n.timeoutTimer),n.statusCode=n.status,i&&0==n.statusCode){var t=new Error("CORS request rejected: "+e.uri);return t.cors="rejected",s.loading=!0,s.end=!0,e.callback(t,n)}e.onResponse(null,n)}}function u(){s.loading||(s.loading=!0,l.log.debug("Response body loading",{id:n.id}))}}(t)}Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(1<arguments.length&&(n=e),r=0;r<o;){var s;r in i&&(s=i[r],t.call(n,s,r,i)),r++}});var f=0;l.withCredentials=!1,l.DEFAULT_TIMEOUT=18e4,l.defaults=function(i,t){var e=function(r){return function(t,e){for(var n in t="string"==typeof t?{uri:t}:JSON.parse(JSON.stringify(t)),i)void 0===t[n]&&(t[n]=i[n]);return r(t,e)}},n=e(l);return n.get=e(l.get),n.post=e(l.post),n.put=e(l.put),n.head=e(l.head),n};function u(){}function d(n,r){return function(t,e){"object"==typeof e&&(t+=" "+JSON.stringify(e));return n[r].call(n,t)}}["get","put","post","head"].forEach(function(t){var n=t.toUpperCase();l[t.toLowerCase()]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t))).method=n;var e=[t].concat(Array.prototype.slice.apply(arguments,[1]));return l.apply(this,e)}}),l.couch=function(t,i){return"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,i=i||u,l(t,function(t,e,n){if(t)return i(t,e,n);if((e.statusCode<200||299<e.statusCode)&&n.error){for(var r in t=new Error("CouchDB error: "+(n.error.reason||n.error.error)),n)t[r]=n[r];return i(t,e,n)}return i(t,e,n)})},t.exports=l},function(t,e,n){var s=n(121);t.exports=function(t,e){if(null==t)return{};var n,r,i=s(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}},function(t,e){},function(t,e){},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(10),o=n(50),s=n(49),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return s(t);var e=o(t),n=[];for(var r in t)("constructor"!=r||!e&&a.call(t,r))&&n.push(r);return n}},function(t,s,a){(function(t){var e=a(43),n="object"==typeof s&&s&&!s.nodeType&&s,r=n&&"object"==typeof t&&t&&!t.nodeType&&t,i=r&&r.exports===n&&e.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o}).call(this,a(24)(t))},function(t,e){t.exports=function(e){return function(t){return e(t)}}},function(t,e,n){var r=n(14),i=n(26),o=n(13),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},function(t,e,n){var r=n(54),i=n(53),o=n(52),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},function(t,e){t.exports=function(){return!1}},function(t,a,c){(function(t){var e=c(21),n=c(56),r="object"==typeof a&&a&&!a.nodeType&&a,i=r&&"object"==typeof t&&t&&!t.nodeType&&t,o=i&&i.exports===r?e.Buffer:void 0,s=(o?o.isBuffer:void 0)||n;t.exports=s}).call(this,c(24)(t))},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(14),i=n(13);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e,n){var r=n(59),i=n(13),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var h=n(61),l=n(60),f=n(58),d=n(57),p=n(25),y=n(55),v=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=f(t),r=!n&&l(t),i=!n&&!r&&d(t),o=!n&&!r&&!i&&y(t),s=n||r||i||o,a=s?h(t.length,String):[],c=a.length;for(var u in t)!e&&!v.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||p(u,c))||a.push(u);return a}},function(t,e,n){var r=n(62),i=n(51),o=n(27);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var i=n(29),o=n(27),s=n(25),a=n(10);t.exports=function(t,e,n){if(!a(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&s(e,n.length):"string"==r&&e in n)&&i(n[e],t)}},function(t,e){var o=Date.now;t.exports=function(n){var r=0,i=0;return function(){var t=o(),e=16-(t-i);if(i=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(66),i=n(31),o=n(28),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},function(t,e,n){var r=n(67),i=n(65)(r);t.exports=i},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var c=n(69),u=Math.max;t.exports=function(o,s,a){return s=u(void 0===s?o.length-1:s,0),function(){for(var t=arguments,e=-1,n=u(t.length-s,0),r=Array(n);++e<n;)r[e]=t[s+e];e=-1;for(var i=Array(s+1);++e<s;)i[e]=t[e];return i[s]=a(r),c(o,this,i)}}},function(t,e,n){var r=n(28),i=n(70),o=n(68);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e,n){var r=n(71),c=n(64);t.exports=function(a){return r(function(t,e){var n=-1,r=e.length,i=1<r?e[r-1]:void 0,o=2<r?e[2]:void 0;for(i=3<a.length&&"function"==typeof i?(r--,i):void 0,o&&c(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var s=e[n];s&&a(t,s,n,i)}return t})}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(21)["__core-js_shared__"];t.exports=r},function(t,e,n){var r,i=n(75),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(30),i=n(76),o=n(10),s=n(74),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,h=c.toString,l=u.hasOwnProperty,f=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},function(t,e,n){var r=n(77),i=n(73);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var i=n(32),o=n(29),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var r=t[e];s.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){var u=n(79),h=n(32);t.exports=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?h(n,a,c):u(n,a,c)}return n}},function(t,e,n){var r=n(80),i=n(72),o=n(63),s=i(function(t,e){r(e,o(e),t)});t.exports=s},function(t,e){function a(t){this.message=t}(a.prototype=new Error).name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,s="";r=e.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return s}},function(t,e,n){var r=n(82);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(r(e).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(t){return r(e)}}},function(t,e,n){"use strict";var r=n(83);function i(t){this.message=t}(i.prototype=new Error).name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new i("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(r(t.split(".")[n]))}catch(t){throw new i("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=i},function(t,e,n){var u=n(46),h=n(4),r=function(){this.initialize.apply(this,arguments)};r.prototype={initialize:function(t,e){this.client=t,this.token=e,this.signature=e},buildURL:function(){for(var t="reaction/",e=0;e<arguments.length;e++)t+=arguments[e]+"/";return t},all:function(t,e){return this.client.get({url:this.buildURL(),signature:this.signature},e)},_convertTargetFeeds:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){return"string"==typeof t?t:t.id})},add:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=r.id,o=r.targetFeeds,s=void 0===o?[]:o,a=r.userId,c=4<arguments.length?arguments[4]:void 0;e instanceof Object&&(e=e.id);var u={id:i,activity_id:e,kind:t,data:n,target_feeds:s=this._convertTargetFeeds(s),user_id:a};return this.client.post({url:this.buildURL(),body:u,signature:this.signature},c)},addChild:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=r.targetFeeds,o=void 0===i?[]:i,s=r.userId,a=4<arguments.length?arguments[4]:void 0;e instanceof Object&&(e=e.id);var c={parent:e,kind:t,data:n,target_feeds:o=this._convertTargetFeeds(o),user_id:s};return this.client.post({url:this.buildURL(),body:c,signature:this.signature},a)},get:function(t,e){return this.client.get({url:this.buildURL(t),signature:this.signature},e)},filter:function(t,e){var n=t.user_id,r=t.activity_id,i=t.reaction_id,o=u(t,["user_id","activity_id","reaction_id"]);if(o.limit||(o.limit=10),1!=(n?1:0+r?1:0+i?1:0))throw new h.SiteError("Must provide exactly one value for one of these params: user_id, activity_id, reaction_id");var s=(n?"user_id":r&&"activity_id")||i&&"reaction_id",a=n||r||i,c=this.buildURL(s,a);return t.kind&&(c=this.buildURL(s,a,t.kind)),this.client.get({url:c,qs:o,signature:this.signature},e)},update:function(t,e){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).targetFeeds,r=void 0===n?[]:n,i=3<arguments.length?arguments[3]:void 0,o={data:e,target_feeds:r=this._convertTargetFeeds(r)};return this.client.put({url:this.buildURL(t),body:o,signature:this.signature},i)},delete:function(t,e){return this.client.delete({url:this.buildURL(t),signature:this.signature},e)}},t.exports=r},function(t,e,n){var r=n(11),o=n(12),s=n(12).Headers,a=n(33),c=n(15),u=n(4),i=function(){this.initialize.apply(this,arguments)};i.prototype={initialize:function(t,e){this.client=t,this.token=e},upload:function(t,e,n){var r,i=new a;return c.isReadableStream(t)?r=t:(r={uri:t,name:e||t.split("/").reverse()[0]},null!=n&&(r.type=n)),i.append("file",r),o("".concat(this.client.enrichUrl("images/"),"?api_key=").concat(this.client.apiKey),{method:"post",body:i,headers:new s({Authorization:this.token})}).then(function(e){return e.ok?e.json():e.text().then(function(t){e.statusCode=e.status;try{t=JSON.parse(t)}catch(t){}throw new u.StreamApiError(JSON.stringify(t)+" with HTTP status code "+e.status,t,e)})})},delete:function(t){return this.client.delete({url:"images/",qs:{url:t},signature:this.token})},process:function(t,e){var n=r(e,{url:t});return Array.isArray(n.crop)&&(n.crop=n.crop.join(",")),this.client.get({url:"images/",qs:n,signature:this.token})},thumbmail:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{crop:"center",resize:"clip"},i=r.crop,o=r.resize;return this.process(t,{w:e,h:n,crop:i,resize:o})}},t.exports=i},function(t,e,n){var o=n(12),s=n(12).Headers,a=n(15),c=n(33),u=n(4),r=function(){this.initialize.apply(this,arguments)};r.prototype={initialize:function(t,e){this.client=t,this.token=e},upload:function(t,e,n){var r,i=new c;return a.isReadableStream(t)?r=t:(r={uri:t,name:e||t.split("/").reverse()[0]},null!=n&&(r.type=n)),i.append("file",r),o("".concat(this.client.enrichUrl("files/"),"?api_key=").concat(this.client.apiKey),{method:"post",body:i,headers:new s({Authorization:this.token})}).then(function(e){return e.ok?e.json():e.text().then(function(t){e.statusCode=e.status;try{t=JSON.parse(t)}catch(t){}throw new u.StreamApiError(JSON.stringify(t)+" with HTTP status code "+e.status,t,e)})})},delete:function(t){return this.client.delete({url:"files/",qs:{url:t},signature:this.token})}},t.exports=r},function(t,e,n){var o=n(4),r=function(){this.initialize.apply(this,arguments)};r.prototype={initialize:function(t,e){this.client=t,this.token=e},buildURL:function(t,e){var n="collections/"+t+"/";return void 0===e?n:n+e+"/"},entry:function(t,e,n){return new i(this,t,e,n)},get:function(t,e,n){var r=this;return this.client.get({url:this.buildURL(t,e),signature:this.token}).then(function(t){var e=r.client.collections.entry(t.collection,t.id,t.data);return e.full=t,n&&n(e),e})},add:function(t,e,n,r){var i=this;null===e&&(e=void 0);var o={id:e,data:n};return this.client.post({url:this.buildURL(t),body:o,signature:this.token}).then(function(t){var e=i.client.collections.entry(t.collection,t.id,t.data);return e.full=t,r&&r(e),e})},update:function(t,e,n,r){var i=this,o={data:n};return this.client.put({url:this.buildURL(t,e),body:o,signature:this.token}).then(function(t){var e=i.client.collections.entry(t.collection,t.id,t.data);return e.full=t,r&&r(e),e})},delete:function(t,e,n){return this.client.delete({url:this.buildURL(t,e),signature:this.token},n)},upsert:function(t,e,n){if(!this.client.usingApiSecret)throw new o.SiteError("This method can only be used server-side using your API Secret");var r=arguments[arguments.length-1];n=r.call?r:void 0,Array.isArray(e)||(e=[e]);var i={data:{}};return i.data[t]=e,this.client.post({url:"collections/",serviceName:"api",body:i,signature:this.client.getCollectionsToken()},n)},select:function(e,t,n){if(!this.client.usingApiSecret)throw new o.SiteError("This method can only be used server-side using your API Secret");var r=arguments[arguments.length-1];n=r.call?r:void 0,Array.isArray(t)||(t=[t]);var i={foreign_ids:t.map(function(t){return e+":"+t}).join(",")};return this.client.get({url:"collections/",serviceName:"api",qs:i,signature:this.client.getCollectionsToken()},n)},deleteMany:function(t,e,n){if(!this.client.usingApiSecret)throw new o.SiteError("This method can only be used server-side using your API Secret");var r=arguments[arguments.length-1];n=r.call?r:void 0,Array.isArray(e)||(e=[e]);var i={collection_name:t,ids:e=e.map(function(t){return t.toString()}).join(",")};return this.client.delete({url:"collections/",serviceName:"api",qs:i,signature:this.client.getCollectionsToken()},n)}};var i=function(){this.initialize.apply(this,arguments)};i.prototype={initialize:function(t,e,n,r){this.collection=e,this.store=t,this.id=n,this.data=r},_streamRef:function(){return"SO:".concat(this.collection,":").concat(this.id)},get:function(e){var n=this;return this.store.get(this.collection,this.id).then(function(t){return n.data=t.data,n.full=t,e&&e(t),t})},add:function(e){var n=this;return this.store.add(this.collection,this.id,this.data).then(function(t){return n.data=t.data,n.full=t,e&&e(t),t})},update:function(e){var n=this;return this.store.update(this.collection,this.id,this.data).then(function(t){return n.data=t.data,n.full=t,e&&e(t),t})},delete:function(e){var n=this;return this.store.delete(this.collection,this.id).then(function(t){return n.data=null,n.full=null,e&&e(t),t})}},t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(6),s=r({initialize:function(t,e,n,r){this._client=t,this._channels=e,this._callback=n,this._context=r,this._cancelled=!1},withChannel:function(t,e){return this._withChannel=[t,e],this},apply:function(t,e){var n=e[0];this._callback&&this._callback.call(this._context,n.data),this._withChannel&&this._withChannel[0].call(this._withChannel[1],n.channel,n.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});i(s.prototype,o),t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(6);t.exports=r(i)},function(t,e,n){"use strict";var r={addExtension:function(t){this._extensions=this._extensions||[],this._extensions.push(t),t.added&&t.added(this)},removeExtension:function(t){if(this._extensions)for(var e=this._extensions.length;e--;)this._extensions[e]===t&&(this._extensions.splice(e,1),t.removed&&t.removed(this))},pipeThroughExtensions:function(r,t,i,o,s){if(this.debug("Passing through ? extensions: ?",r,t),!this._extensions)return o.call(s,t);var a=this._extensions.slice(),c=function(t){if(!t)return o.call(s,t);var e=a.shift();if(!e)return o.call(s,t);var n=e[r];if(!n)return c(t);3<=n.length?e[r](t,i,c):e[r](t,c)};c(t)}};n(0)(r,n(8)),t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(38),o=r({initialize:function(t,e,n){this.code=t,this.params=Array.prototype.slice.call(e),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});o.parse=function(t){if(t=t||"",!i.ERROR.test(t))return new o(null,[],t);var e=t.split(":"),n=parseInt(e[0]),r=e[1].split(",");t=e[2];return new o(n,r,t)};var s={versionMismatch:[300,"Version mismatch"],conntypeMismatch:[301,"Connection types not supported"],extMismatch:[302,"Extension mismatch"],badRequest:[400,"Bad request"],clientUnknown:[401,"Unknown client"],parameterMissing:[402,"Missing required parameter"],channelForbidden:[403,"Forbidden channel"],channelUnknown:[404,"Unknown channel"],channelInvalid:[405,"Invalid channel"],extUnknown:[406,"Unknown extension"],publishFailed:[407,"Failed to publish"],serverError:[500,"Internal server error"]};for(var a in s)!function(t){o[t]=function(){return new o(s[t][0],arguments,s[t][1]).toString()}}(a);t.exports=o},function(n,t,r){"use strict";(function(a){var t=r(1),c=r(3),u=r(16),e=r(0),h=r(7),l=e(t(r(5),{encode:function(t){var e=u(this.endpoint);return e.query.message=h(t),e.query.jsonp="__jsonp"+l._cbCount+"__",c.stringify(e)},request:function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script"),r=l.getCallbackName(),i=u(this.endpoint),o=this;i.query.message=h(t),i.query.jsonp=r;var s=function(){if(!a[r])return!1;a[r]=void 0;try{delete a[r]}catch(t){}n.parentNode.removeChild(n)};return a[r]=function(t){s(),o._receive(t)},n.type="text/javascript",n.src=c.stringify(i),e.appendChild(n),n.onerror=function(){s(),o._handleError(t)},{abort:s}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(t,e,n,r){n.call(r,!0)}});n.exports=l}).call(this,r(2))},function(i,t,o){"use strict";(function(c){var t=o(1),e=o(36),u=o(3),n=o(0),r=o(7),h=n(t(o(5),{encode:function(t){return"message="+encodeURIComponent(r(t))},request:function(e){var t,n=c.XDomainRequest?XDomainRequest:XMLHttpRequest,r=new n,i=++h._id,o=this._dispatcher.headers,s=this;if(r.open("POST",u.stringify(this.endpoint),!0),r.setRequestHeader)for(t in r.setRequestHeader("Pragma","no-cache"),o)o.hasOwnProperty(t)&&r.setRequestHeader(t,o[t]);var a=function(){if(!r)return!1;h._pending.remove(i),r.onload=r.onerror=r.ontimeout=r.onprogress=null,r=null};return r.onload=function(){var t;try{t=JSON.parse(r.responseText)}catch(t){}a(),t?s._receive(t):s._handleError(e)},r.onerror=r.ontimeout=function(){a(),s._handleError(e)},r.onprogress=function(){},n===c.XDomainRequest&&h._pending.add({id:i,xhr:r}),r.send(this.encode(e)),r}}),{_id:0,_pending:new e,isUsable:function(t,e,n,r){if(u.isSameOrigin(e))return n.call(r,!1);if(c.XDomainRequest)return n.call(r,e.protocol===location.protocol);if(c.XMLHttpRequest){var i=new XMLHttpRequest;return n.call(r,void 0!==i.withCredentials)}return n.call(r,!1)}});i.exports=h}).call(this,o(2))},function(u,t,h){"use strict";(function(i){var t=h(1),o=h(3),s=h(16),e=h(0),n=h(6),a=h(5),c=h(35),r=e(t(a,{initialize:function(t,e){if(a.prototype.initialize.call(this,t,e),!i.EventSource)return this.setDeferredStatus("failed");this._xhr=new c(t,e),(e=s(e)).pathname+="/"+t.clientId;var n=new i.EventSource(o.stringify(e)),r=this;n.onopen=function(){r._everConnected=!0,r.setDeferredStatus("succeeded")},n.onerror=function(){r._everConnected?r._handleError([]):(r.setDeferredStatus("failed"),n.close())},n.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(t){}e?r._receive(e):r._handleError([])},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)})},encode:function(t){return this._xhr.encode(t)},request:function(t){return this._xhr.request(t)}}),{isUsable:function(e,n,r,i){if(!e.clientId)return r.call(i,!1);c.isUsable(e,n,function(t){if(!t)return r.call(i,!1);this.create(e,n).isUsable(r,i)},this)},create:function(t,e){var n=t.transports.eventsource=t.transports.eventsource||{},r=t.clientId,i=s(e);return i.pathname+="/"+(r||""),n[i=o.stringify(i)]=n[i]||new this(t,e),n[i]}});e(r.prototype,n),u.exports=r}).call(this,h(2))},function(e,t,n){"use strict";(function(t){var r=t.MozWebSocket||t.WebSocket;e.exports={create:function(t,e,n){return"function"!=typeof r?null:new r(t)}}}).call(this,n(2))},function(f,t,d){"use strict";(function(t){var e=d(1),o=d(9),s=d(36),n=d(3),r=d(18),i=d(16),a=d(0),c=d(7),u=d(96),h=d(6),l=a(e(d(5),{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)}),this.connect()},request:function(n){this._pending=this._pending||new s;for(var t=0,e=n.length;t<e;t++)this._pending.add(n[t]);var r=this,i=new o(function(e,t){r.callback(function(t){t&&1===t.readyState&&(t.send(c(n)),e(t))}),r.connect()});return{abort:function(){i.then(function(t){t.close()})}}},connect:function(){if(!l._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var n=this._createSocket();if(!n)return this.setDeferredStatus("failed");var i=this,r=!(n.onopen=function(){n.headers&&i._storeCookies(n.headers["set-cookie"]),i._socket=n,i._state=i.CONNECTED,i._everConnected=!0,i._ping(),i.setDeferredStatus("succeeded",n)});n.onclose=n.onerror=function(){if(!r){r=!0;var t=i._state===i.CONNECTED;n.onopen=n.onclose=n.onerror=n.onmessage=null,delete i._socket,i._state=i.UNCONNECTED,i.removeTimeout("ping");var e=i._pending?i._pending.toArray():[];delete i._pending,t||i._everConnected?(i.setDeferredStatus("unknown"),i._handleError(e,t)):i.setDeferredStatus("failed")}},n.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(t){}if(e){for(var n=0,r=(e=[].concat(e)).length;n<r;n++)void 0!==e[n].successful&&i._pending.remove(e[n]);i._receive(e)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var t=l.getSocketUrl(this.endpoint),e=this._dispatcher.headers,n=this._dispatcher.wsExtensions,r=this._getCookies(),i=this._dispatcher.tls,o={extensions:n,headers:e,proxy:this._proxy,tls:i};return""!==r&&(o.headers.Cookie=r),u.create(t,[],o)},_ping:function(){this._socket&&1===this._socket.readyState&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(t,e){var n=t.transports.websocket=t.transports.websocket||{};return n[e.href]=n[e.href]||new this(t,e),n[e.href]},getSocketUrl:function(t){return(t=i(t)).protocol=this.PROTOCOLS[t.protocol],n.stringify(t)},isUsable:function(t,e,n,r){this.create(t,e).isUsable(n,r)}});a(l.prototype,h),r.Event&&void 0!==t.onbeforeunload&&r.Event.on(t,"beforeunload",function(){l._unloaded=!0}),f.exports=l}).call(this,d(2))},function(t,e,n){"use strict";(function(o){t.exports={addTimeout:function(t,e,n,r){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(t)){var i=this;this._timeouts[t]=o.setTimeout(function(){delete i._timeouts[t],n.call(r)},1e3*e)}},removeTimeout:function(t){this._timeouts=this._timeouts||{};var e=this._timeouts[t];e&&(o.clearTimeout(e),delete this._timeouts[t])},removeAllTimeouts:function(){for(var t in this._timeouts=this._timeouts||{},this._timeouts)this.removeTimeout(t)}}}).call(this,n(2))},function(t,e,n){"use strict";var r=n(5);r.register("websocket",n(97)),r.register("eventsource",n(95)),r.register("long-polling",n(35)),r.register("cross-origin-long-polling",n(94)),r.register("callback-polling",n(93)),t.exports=r},function(h,t,l){"use strict";(function(s){var t=l(1),a=l(3),c=l(37),e=l(0),n=l(8),r=l(17),i=l(99),u=l(34),o=t({className:"Dispatcher",MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(t,e,n){this._client=t,this.endpoint=a.parse(e),this._alternates=n.endpoints||{},this.cookies=c.CookieJar&&new c.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=n.retry||this.DEFAULT_RETRY,this._scheduler=n.scheduler||u,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=n.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var r=n.websocketExtensions;if(r)for(var i=0,o=(r=[].concat(r)).length;i<o;i++)this.addWebsocketExtension(r[i]);for(var s in this.tls=n.tls||{},this.tls.ca=this.tls.ca||n.ca,this._alternates)this._alternates[s]=a.parse(this._alternates[s]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(t){return this._alternates[t]||this.endpoint},addWebsocketExtension:function(t){this.wsExtensions.push(t)},disable:function(t){this._disabled.push(t)},setHeader:function(t,e){this.headers[t]=e},close:function(){var t=this._transport;delete this._transport,t&&t.close()},getConnectionTypes:function(){return i.getConnectionTypes()},selectTransport:function(t){i.get(this,t,this._disabled,function(t){this.debug("Selected ? transport for ?",t.connectionType,a.stringify(t.endpoint)),t!==this._transport&&(this._transport&&this._transport.close(),this._transport=t,this.connectionType=t.connectionType)},this)},sendMessage:function(t,e,n){n=n||{};var r,i=t.id,o=n.attempts,s=n.deadline&&(new Date).getTime()+1e3*n.deadline,a=this._envelopes[i];a||(r=new this._scheduler(t,{timeout:e,interval:this.retry,attempts:o,deadline:s}),a=this._envelopes[i]={message:t,scheduler:r}),this._sendEnvelope(a)},_sendEnvelope:function(t){if(this._transport&&!t.request&&!t.timer){var e=t.message,n=t.scheduler,r=this;if(!n.isDeliverable())return n.abort(),void delete this._envelopes[e.id];t.timer=s.setTimeout(function(){r.handleError(e)},1e3*n.getTimeout()),n.send(),t.request=this._transport.sendMessage(e)}},handleResponse:function(t){var e=this._envelopes[t.id];void 0!==t.successful&&e&&(e.scheduler.succeed(),delete this._envelopes[t.id],s.clearTimeout(e.timer)),this.trigger("message",t),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(t,e){var n=this._envelopes[t.id],r=n&&n.request,i=this;if(r){r.then(function(t){t&&t.abort&&t.abort()});var o=n.scheduler;o.fail(),s.clearTimeout(n.timer),n.request=n.timer=null,e?this._sendEnvelope(n):n.timer=s.setTimeout(function(){n.timer=null,i._sendEnvelope(n)},1e3*o.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down"))}}});o.create=function(t,e,n){return new o(t,e,n)},e(o.prototype,r),e(o.prototype,n),h.exports=o}).call(this,l(2))},function(t,e){var s="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};function n(){}(t.exports=n).prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(s(e)){n=Array.prototype.slice.call(arguments,1);for(var r=e.slice(),i=0,o=r.length;i<o;i++)r[i].apply(this,n);return!0}return!1},n.prototype.on=n.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},n.prototype.once=function(e,n){var r=this;return r.on(e,function t(){r.removeListener(e,t),n.apply(this,arguments)}),this},n.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(s(n)){var r=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}(n,e);if(r<0)return this;n.splice(r,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},n.prototype.removeAllListeners=function(t){return 0===arguments.length?this._events={}:t&&this._events&&this._events[t]&&(this._events[t]=null),this},n.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}},function(t,e,n){"use strict";var r=n(19);t.exports=function(t,e){for(var n in t)if(r.indexOf(e,n)<0)throw new Error("Unrecognized option: "+n)}},function(b,t,m){"use strict";(function(i){var o=m(41),t=m(1),s=(m(9),m(3)),a=m(19),n=m(18),c=m(40),e=m(0),u=m(102),r=m(6),h=m(8),l=m(17),f=m(39),d=m(100),p=m(92),y=m(91),v=m(90),g=m(89),_=t({className:"Client",UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(t,e){this.info("New client created for ?",t),u(e=e||{},["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._channels=new f.Set,this._dispatcher=d.create(this,t||this.DEFAULT_ENDPOINT,e),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(e.interval||this.INTERVAL),timeout:1e3*(e.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),n.Event&&void 0!==i.onbeforeunload&&n.Event.on(i,"beforeunload",function(){a.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(t){return this._dispatcher.addWebsocketExtension(t)},disable:function(t){return this._dispatcher.disable(t)},setHeader:function(t,e){return this._dispatcher.setHeader(t,e)},handshake:function(e,n){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var r=this;this.info("Initiating handshake with ?",s.stringify(this._dispatcher.endpoint)),this._dispatcher.selectTransport(c.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:f.HANDSHAKE,version:c.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(t){t.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=t.clientId,this._dispatcher.selectTransport(t.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),e&&o(function(){e.call(n)})):(this.info("Handshake unsuccessful"),i.setTimeout(function(){r.handshake(e,n)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,e)},this);this.callback(t,e),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:f.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var e=new v;return this._sendMessage({channel:f.DISCONNECT,clientId:this._dispatcher.clientId},{},function(t){t.successful?(this._dispatcher.close(),e.setDeferredStatus("succeeded")):e.setDeferredStatus("failed",p.parse(t.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new f.Set,e}},subscribe:function(n,e,r){if(n instanceof Array)return a.map(n,function(t){return this.subscribe(t,e,r)},this);var i=new g(this,n,e,r),t=!0===e;return this._channels.hasSubscription(n)&&!t?(this._channels.subscribe([n],i),i.setDeferredStatus("succeeded")):this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,n),t||this._channels.subscribe([n],i),this._sendMessage({channel:f.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:n},{},function(t){if(!t.successful)return i.setDeferredStatus("failed",p.parse(t.error)),this._channels.unsubscribe(n,i);var e=[].concat(t.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,e),i.setDeferredStatus("succeeded")},this)},this),i},unsubscribe:function(t,e){if(t instanceof Array)return a.map(t,function(t){return this.unsubscribe(t,e)},this);this._channels.unsubscribe(t,e)&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,t),this._sendMessage({channel:f.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(t){if(t.successful){var e=[].concat(t.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,e)}},this)},this)},publish:function(t,e,n){u(n||{},["attempts","deadline"]);var r=new v;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,t,e),this._sendMessage({channel:t,data:e,clientId:this._dispatcher.clientId},n,function(t){t.successful?r.setDeferredStatus("succeeded"):r.setDeferredStatus("failed",p.parse(t.error))},this)},this),r},_sendMessage:function(t,e,n,r){t.id=this._generateMessageId();var i=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",t,null,function(t){t&&(n&&(this._responseCallbacks[t.id]=[n,r]),this._dispatcher.sendMessage(t,i,e||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(t){var e,n=t.id;void 0!==t.successful&&(e=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),e&&e[0].call(e[1],t))},this)},_handleAdvice:function(t){e(this._advice,t),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var t=this;i.setTimeout(function(){t.connect()},this._advice.interval)}});e(_.prototype,r),e(_.prototype,l),e(_.prototype,h),e(_.prototype,y),b.exports=_}).call(this,m(2))},function(t,e,n){"use strict";var r=n(40),i=n(8),o={VERSION:r.VERSION,Client:n(103),Scheduler:n(34)};i.wrapper=o,t.exports=o},function(t,e){},function(t,e){},function(f,t,e){"use strict";(function(t){function e(t){r.length||(n(),!0),r[r.length]=t}f.exports=e;var n,r=[],i=0;function o(){for(;i<r.length;){var t=i;if(i+=1,r[t].call(),1024<i){for(var e=0,n=r.length-i;e<n;e++)r[e]=r[e+i];r.length-=i,i=0}}r.length=0,i=0,!1}var s,a,c,u=void 0!==t?t:self,h=u.MutationObserver||u.WebKitMutationObserver;function l(r){return function(){var t=setTimeout(n,0),e=setInterval(n,50);function n(){clearTimeout(t),clearInterval(e),r()}}}n="function"==typeof h?(s=1,a=new h(o),c=document.createTextNode(""),a.observe(c,{characterData:!0}),function(){s=-s,c.data=s}):l(o),e.requestFlush=n,e.makeRequestCallFromTimer=l}).call(this,e(2))},function(t,e,n){var r=n(9);t.exports=r},function(t,e){},function(t,e,n){!function(){var t=e,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function c(t){this.message=t}(c.prototype=new Error).name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,n,r=String(t),i=0,o=a,s="";r.charAt(0|i)||(o="=",i%1);s+=o.charAt(63&e>>8-i%1*8)){if(255<(n=r.charCodeAt(i+=.75)))throw new c("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return s}),t.atob||(t.atob=function(t){var e=String(t).replace(/[=]+$/,"");if(e.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,o=0,s="";r=e.charAt(o++);~r&&(n=i%4?64*n+r:r,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)r=a.indexOf(r);return s})}()},function(t,e){},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var i=n(112);t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}},function(t,e){t.exports=function(e,n){return function(t){return e(n(t))}}},function(t,e,n){var r=n(114)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(44),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{var r=!(t[a]=void 0)}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},function(t,e,n){var r=n(14),i=n(115),o=n(13),s=Function.prototype,a=Object.prototype,c=s.toString,u=a.hasOwnProperty,h=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}},function(t,e,n){var r=n(11),a=n(22),i=n(4),c=n(15),o=n(10),s=n(118),u=n(42),h=n(20),l=function(){this.initialize.apply(this,arguments)};function f(t){var e=t;if(Array.isArray(t))e=t.map(function(t){return f(t)});else if(s(t))for(var n in e={},t)e[n]=f(t[n]);else o(t)&&void 0!==t._streamRef&&(e=t._streamRef());return e}l.prototype={initialize:function(t,e,n,r){if(!e||!n)throw new i.FeedError('Please provide a feed slug and user id, ie client.feed("user", "1")');if(-1!==e.indexOf(":"))throw new i.FeedError('Please initialize the feed using client.feed("user", "1") not client.feed("user:1")');if(c.validateFeedSlug(e),c.validateUserId(n),!this.apiSecret&&!r)throw new i.FeedError("Missing token, in client side mode please provide a feed secret");this.client=t,this.slug=e,this.userId=n,this.id=this.slug+":"+this.userId,this.token=r,this.feedUrl=this.id.replace(":","/"),this.feedTogether=this.id.replace(":",""),this.signature=this.feedTogether+" "+this.token,this.notificationChannel="site-"+this.client.appId+"-feed-"+this.feedTogether,this.enrichByDefault=!1},addActivity:function(t,e){return!(t=f(t)).actor&&this.client.currentUser&&(t.actor=this.client.currentUser._streamRef()),this.client.post({url:"feed/"+this.feedUrl+"/",body:t,signature:this.signature},e)},removeActivity:function(t,e){var n=t.foreignId?t.foreignId:t,r={};return t.foreignId&&(r.foreign_id="1"),this.client.delete({url:"feed/"+this.feedUrl+"/"+n+"/",qs:r,signature:this.signature},e)},addActivities:function(t,e){var n={activities:t=f(t)};return this.client.post({url:"feed/"+this.feedUrl+"/",body:n,signature:this.signature},e)},follow:function(t,e,n,r){var i;e instanceof u&&(e=e.id),c.validateFeedSlug(t),c.validateUserId(e);var o=arguments[arguments.length-1];r=o.call?o:void 0;var s=t+":"+e;n&&!n.call&&void 0!==n.limit&&null!==n.limit&&(i=n.limit);var a={target:s};return null!=i&&(a.activity_copy_limit=i),this.client.post({url:"feed/"+this.feedUrl+"/following/",body:a,signature:this.signature},r)},unfollow:function(t,e,n,r){var i={},o={};"function"==typeof n&&(r=n),"object"===a(n)&&(i=n),"boolean"==typeof i.keepHistory&&i.keepHistory&&(o.keep_history="1"),c.validateFeedSlug(t),c.validateUserId(e);var s=t+":"+e;return this.client.delete({url:"feed/"+this.feedUrl+"/following/"+s+"/",qs:o,signature:this.signature},r)},following:function(t,e){return void 0!==t&&t.filter&&(t.filter=t.filter.join(",")),this.client.get({url:"feed/"+this.feedUrl+"/following/",qs:t,signature:this.signature},e)},followers:function(t,e){return void 0!==t&&t.filter&&(t.filter=t.filter.join(",")),this.client.get({url:"feed/"+this.feedUrl+"/followers/",qs:t,signature:this.signature},e)},get:function(t,e){var n;return t&&t.mark_read&&t.mark_read.join&&(t.mark_read=t.mark_read.join(",")),t&&t.mark_seen&&t.mark_seen.join&&(t.mark_seen=t.mark_seen.join(",")),this.client.replaceReactionOptions(t),n=this.client.shouldUseEnrichEndpoint(t)?"enrich/feed/":"feed/",this.client.get({url:n+this.feedUrl+"/",qs:t,signature:this.signature},e)},getReadOnlyToken:function(){var t=""+this.slug+this.userId;return h.JWTScopeToken(this.client.apiSecret,"*","read",{feedId:t,expireTokens:this.client.expireTokens})},getReadWriteToken:function(){var t=""+this.slug+this.userId;return h.JWTScopeToken(this.client.apiSecret,"*","*",{feedId:t,expireTokens:this.client.expireTokens})},getActivityDetail:function(t,e,n){return this.get(r({id_lte:t,id_gte:t,limit:1},e||{}),n)},getFayeClient:function(){return this.client.getFayeClient()},subscribe:function(t){if(!this.client.appId)throw new i.SiteError("Missing app id, which is needed to subscribe, use var client = stream.connect(key, secret, appId);");var e=this.getFayeClient().subscribe("/"+this.notificationChannel,t);return this.client.subscriptions["/"+this.notificationChannel]={token:this.token,userId:this.notificationChannel,fayeSubscription:e},e},unsubscribe:function(){var t=this.client.subscriptions["/"+this.notificationChannel];t&&(delete this.client.subscriptions["/"+this.notificationChannel],t.fayeSubscription.cancel())},updateActivityToTargets:function(t,e,n,r,i){if(!t)throw new Error("Missing `foreign_id` parameter!");if(!e)throw new Error("Missing `time` parameter!");if(!n&&!r&&!i)throw new Error('Requires you to provide at least one parameter for `new_targets`, `added_targets`, or `removed_targets` - example: `updateActivityToTargets("foreignID:1234", new Date(), [new_targets...], [added_targets...], [removed_targets...])`');if(n&&(r||i))throw new Error("Can't include add_targets or removed_targets if you're also including new_targets");if(r&&i)for(var o=0;o<r.length;o++)for(var s=0;s<i.length;s++)if(i[s]==r[o])throw new Error("Can't have the same feed ID in added_targets and removed_targets.");var a={foreign_id:t,time:e};return n&&(a.new_targets=n),r&&(a.added_targets=r),i&&(a.removed_targets=i),this.client.post({url:"feed_targets/"+this.feedUrl+"/activity_to_targets/",signature:this.signature,body:a})}},t.exports=l},function(t,e){var n=function(){this.initialize.apply(this,arguments)};n.prototype={initialize:function(t){this.client=t},get:function(t,e,n){var r=arguments[arguments.length-1];return n=r.call?r:void 0,e&&!e.call||(e={}),this.client.get({url:t+"/",serviceName:"personalization",qs:e,signature:this.client.getPersonalizationToken()},n)},post:function(t,e,n,r){var i=arguments[arguments.length-1];return r=i.call?i:void 0,e&&!e.call||(e={}),n&&!n.call||(n={}),this.client.post({url:t+"/",serviceName:"personalization",qs:e,body:n,signature:this.client.getPersonalizationToken()},r)},delete:function(t,e,n){var r=arguments[arguments.length-1];return n=r.call?r:void 0,e&&!e.call||(e={}),this.client.delete({url:t+"/",serviceName:"personalization",qs:e,signature:this.client.getPersonalizationToken()},n)}},t.exports=n},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],0<=e.indexOf(n)||(i[n]=t[n]);return i}},function(E,t,x){(function(u){var r=x(11),y=x(46),h=x(120),l=x(45),i=x(119),v=x(20),f=x(4),a=x(15),t=x(109),e=x(108),c=x(106),d=x(105),n=x(104),p=x(88),g=x(87),_=x(86),b=x(85),o=x(42),m=x(84),s=x(81),w=function(){this.initialize.apply(this,arguments)};if((w.prototype={baseUrl:"https://api.stream-io-api.com/api/",baseAnalyticsUrl:"https://analytics.stream-io-api.com/analytics/",initialize:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(this.apiKey=t,this.usingApiSecret=null!=e&&!v.isJWT(e),this.apiSecret=this.usingApiSecret?e:null,this.userToken=this.usingApiSecret?null:e,this.enrichByDefault=!this.usingApiSecret,null!=this.userToken){var i=m(this.userToken);if(!i.user_id)throw new TypeError("user_id is missing in user token");this.userId=i.user_id,this.currentUser=this.user(this.userId),this.authPayload=i}if(this.appId=n,this.options=r,this.version=this.options.version||"v1.0",this.fayeUrl=this.options.fayeUrl||"https://faye.getstream.io/faye",this.fayeClient=null,this.request=l,this.group=this.options.group||"unspecified",this.subscriptions={},this.expireTokens=!!this.options.expireTokens&&this.options.expireTokens,this.location=this.options.location,this.baseUrl=this.getBaseUrl(),void 0!==u&&u.env.LOCAL_FAYE&&(this.fayeUrl="http://localhost:9999/faye/"),void 0!==u&&u.env.STREAM_ANALYTICS_BASE_URL&&(this.baseAnalyticsUrl=u.env.STREAM_ANALYTICS_BASE_URL),this.handlers={},this.browser=void 0!==this.options.browser?this.options.browser:"undefined"!=typeof window,this.node=!this.browser,!this.browser){var o=this.options.keepAlive;void 0===o&&(o=!0);var s=x(48),a=new(x(47).Agent)({keepAlive:o,keepAliveMsecs:3e3}),c=new s.Agent({keepAlive:o,keepAliveMsecs:3e3});this.requestAgent=this.baseUrl.startsWith("https://")?a:c}if(this.personalization=new h(this),this.browser&&this.usingApiSecret)throw new f.FeedError('You are publicly sharing your App Secret. Do not expose the App Secret in browsers, "native" mobile apps, or other non-trusted environments.');this.collections=new p(this,this.getOrCreateToken()),this.files=new g(this,this.getOrCreateToken()),this.images=new _(this,this.getOrCreateToken()),this.reactions=new b(this,this.getOrCreateToken())},getPersonalizationToken:function(){if(this._personalizationToken)return this._personalizationToken;if(!this.apiSecret)throw new f.SiteError("Missing secret, which is needed to perform signed requests, use var client = stream.connect(key, secret);");return this._personalizationToken=v.JWTScopeToken(this.apiSecret,"personalization","*",{userId:"*",feedId:"*",expireTokens:this.expireTokens}),this._personalizationToken},getCollectionsToken:function(){if(this._collectionsToken)return this._collectionsToken;if(!this.apiSecret)throw new f.SiteError("Missing secret, which is needed to perform signed requests, use var client = stream.connect(key, secret);");return this._collectionsToken=v.JWTScopeToken(this.apiSecret,"collections","*",{feedId:"*",expireTokens:this.expireTokens}),this._collectionsToken},getAnalyticsToken:function(){if(this.apiSecret)return v.JWTScopeToken(this.apiSecret,"analytics","*",{userId:"*",expireTokens:this.expireTokens});throw new f.SiteError("Missing secret, which is needed to perform signed requests, use var client = stream.connect(key, secret);")},getBaseUrl:function(t){t||(t="api");var e,n=this.baseUrl;("api"!=t&&(n="https://"+t+".stream-io-api.com/"+t+"/"),this.location)&&(n=(this.options.protocol||"https")+"://"+this.location+"-"+t+".stream-io-api.com/"+t+"/");return(void 0!==u&&u.env.LOCAL||this.options.local)&&(n="http://localhost:8000/"+t+"/"),e="api"==t?"STREAM_BASE_URL":"STREAM_"+t.toUpperCase()+"_URL",void 0!==u&&u.env[e]&&(n=u.env[e]),this.options.urlOverride&&this.options.urlOverride[t]?this.options.urlOverride[t]:n},on:function(t,e){this.handlers[t]=e},off:function(t){void 0===t?this.handlers={}:delete this.handlers[t]},send:function(){var t=Array.prototype.slice.call(arguments),e=t[0];t=t.slice(1),this.handlers[e]&&this.handlers[e].apply(this,t)},wrapPromiseTask:function(t,r,i){var o=this,s=this.wrapCallback(t);return function(t,e,n){t?i(new f.StreamApiError(t,n,e)):/^2/.test(""+e.statusCode)?r(n):i(new f.StreamApiError(JSON.stringify(n)+" with HTTP status code "+e.statusCode,n,e)),s.call(o,t,e,n)}},wrapCallback:function(n){var r=this;return function(){var t=Array.prototype.slice.call(arguments),e=["response"].concat(t);r.send.apply(r,e),void 0!==n&&n.apply(r,t)}},userAgent:function(){return"stream-javascript-client-"+(this.node?"node":"browser")+"-unknown"},getReadOnlyToken:function(t,e){return this.feed(t,e).getReadOnlyToken()},getReadWriteToken:function(t,e){return this.feed(t,e).getReadWriteToken()},feed:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.userId,n=2<arguments.length?arguments[2]:void 0;void 0===n&&(n=this.usingApiSecret?v.JWTScopeToken(this.apiSecret,"*","*",{feedId:""+t+e}):this.userToken),e instanceof o&&(e=e.id);var r=new i(this,t,e,n);return r},enrichUrl:function(t,e){return e||(e="api"),this.getBaseUrl(e)+this.version+"/"+t},replaceReactionOptions:function(t){t&&t.reactions&&(null!=t.reactions.own&&(t.withOwnReactions=t.reactions.own),null!=t.reactions.recent&&(t.withRecentReactions=t.reactions.recent),null!=t.reactions.counts&&(t.withReactionCounts=t.reactions.counts),null!=t.reactions.own_children&&(t.withOwnChildren=t.reactions.own_children),delete t.reactions)},shouldUseEnrichEndpoint:function(t){if(t&&t.enrich){var e=t.enrich;return delete t.enrich,e}return this.enrichByDefault||null!=t.ownReactions||null!=t.withRecentReactions||null!=t.withReactionCounts||null!=t.withOwnChildren},enrichKwargs:function(t){t.url=this.enrichUrl(t.url,t.serviceName),void 0===t.qs&&(t.qs={}),this.browser||(t.agent=this.requestAgent),t.qs.api_key=this.apiKey,t.qs.location=this.group,t.json=!0;var e=t.signature||this.signature;return t.headers={},v.isJWTSignature(e)?(t.headers["stream-auth-type"]="jwt",e=e.split(" ").reverse()[0]):t.headers["stream-auth-type"]="simple",t.timeout=1e4,t.headers.Authorization=e,t.headers["X-Stream-Client"]=this.userAgent(),t.withCredentials=!1,t},getFayeAuthorization:function(){var r=this.apiKey,i=this;return{incoming:function(t,e){e(t)},outgoing:function(t,e){if(t.subscription&&i.subscriptions[t.subscription]){var n=i.subscriptions[t.subscription];t.ext={user_id:n.userId,api_key:r,signature:n.token}}e(t)}}},getFayeClient:function(){if(null===this.fayeClient){this.fayeClient=new n.Client(this.fayeUrl,{timeout:10});var t=this.getFayeAuthorization();this.fayeClient.addExtension(t)}return this.fayeClient},get:function(r,i){return new e(function(t,e){this.send("request","get",r,i),(r=this.enrichKwargs(r)).method="GET",r.gzip=!0;var n=this.wrapPromiseTask(i,t,e);this.request(r,n)}.bind(this))},post:function(r,i){return new e(function(t,e){this.send("request","post",r,i),(r=this.enrichKwargs(r)).method="POST",r.gzip=!0;var n=this.wrapPromiseTask(i,t,e);this.request(r,n)}.bind(this))},delete:function(r,i){return new e(function(t,e){this.send("request","delete",r,i),(r=this.enrichKwargs(r)).gzip=!0,r.method="DELETE";var n=this.wrapPromiseTask(i,t,e);this.request(r,n)}.bind(this))},put:function(r,i){return new e(function(t,e){this.send("request","put",r,i),(r=this.enrichKwargs(r)).method="PUT",r.gzip=!0;var n=this.wrapPromiseTask(i,t,e);this.request(r,n)}.bind(this))},createUserSessionToken:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!this.usingApiSecret||null==this.apiKey)throw new f.FeedError("In order to create user tokens you need to initialize the API client with your API Secret");return v.JWTUserSessionToken(this.apiSecret,t,e,{noTimestamp:!this.expireTokens})},createUserToken:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.createUserSessionToken(t,e)},updateActivities:function(t,e){if(!this.usingApiSecret||null==this.apiKey)throw new f.SiteError("This method can only be used server-side using your API Secret");if(!(t instanceof Array))throw new TypeError("The activities argument should be an Array");var n=v.JWTScopeToken(this.apiSecret,"activities","*",{feedId:"*",expireTokens:this.expireTokens}),r={activities:t};return this.post({url:"activities/",body:r,signature:n},e)},updateActivity:function(t,e){if(!this.usingApiSecret||null==this.apiKey)throw new f.SiteError("This method can only be used server-side using your API Secret");return this.updateActivities([t],e)},getActivities:function(t,e){var n,r,i=t.ids,o=t.foreignIDTimes,s=y(t,["ids","foreignIDTimes"]);if(i){if(!(i instanceof Array))throw new TypeError("The ids argument should be an Array");s.ids=i.join(",")}else{if(!o)throw new TypeError("Missing ids or foreignIDTimes params");if(!(o instanceof Array))throw new TypeError("The foreignIDTimes argument should be an Array");var a=[],c=[],u=!0,h=!1,l=void 0;try{for(var f,d=o[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value;if(!(p instanceof Object))throw new TypeError("foreignIDTimes elements should be Objects");a.push(p.foreignID),c.push(p.time)}}catch(t){h=!0,l=t}finally{try{u||null==d.return||d.return()}finally{if(h)throw l}}s.foreign_ids=a.join(","),s.timestamps=c.join(",")}return n=this.usingApiSecret?v.JWTScopeToken(this.apiSecret,"activities","*",{feedId:"*",expireTokens:this.expireTokens}):this.userToken,this.replaceReactionOptions(s),r=this.shouldUseEnrichEndpoint(s)?"enrich/activities/":"activities/",this.get({url:r,qs:s,signature:n},e)},getOrCreateToken:function(){return this.usingApiSecret?v.JWTScopeToken(this.apiSecret,"*","*",{feedId:"*"}):this.userToken},user:function(t){return new o(this,t,this.getOrCreateToken())},setUser:function(t){var e=this;if(this.usingApiSecret)throw new f.SiteError("This method can only be used client-side using a user token");var n=r(t);return delete n.id,this.currentUser.getOrCreate(n).then(function(t){return e.currentUser=t})},og:function(t){return this.get({url:"og/",qs:{url:t},signature:this.getOrCreateToken()})},personalizedFeed:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;return this.get({url:"enrich/personalization/feed/",qs:t,signature:this.getOrCreateToken()},e)},activityPartialUpdate:function(t,e){return this.activitiesPartialUpdate([t],e).then(function(t){var e=t.activities[0];return delete t.activities,s(e,t),e})},activitiesPartialUpdate:function(t,e){if(!(t instanceof Array))throw new TypeError("changes should be an Array");var n;return t.forEach(function(t){if(!(t instanceof Object))throw new TypeError("changeset should be and Object");if(t.foreignID&&(t.foreign_id=t.foreignID),void 0===t.id&&(void 0===t.foreign_id||void 0===t.time))throw new TypeError("missing id or foreign ID and time");if(t.set&&!(t.set instanceof Object))throw new TypeError("set field should be an Object");if(t.unset&&!(t.unset instanceof Array))throw new TypeError("unset field should be an Array")}),n=this.usingApiSecret?v.JWTScopeToken(this.apiSecret,"activities","*",{feedId:"*",expireTokens:this.expireTokens}):this.userToken,this.post({url:"activity/",body:{changes:t},signature:n},e)}}).collection=w.prototype.collections,c&&(w.prototype.createRedirectUrl=function(t,e,n){var r=d.parse(t);if(!(r.host||r.hostname&&r.port||r.isUnix))throw new f.MissingSchemaError('Invalid URI: "'+d.format(r)+'"');var i=v.JWTScopeToken(this.apiSecret,"redirect_and_track","*",{userId:"*",expireTokens:this.expireTokens}),o=this.baseAnalyticsUrl+"redirect/",s={auth_type:"jwt",authorization:i,url:t,api_key:this.apiKey,events:JSON.stringify(n)};return o+"?"+a.rfc3986(c.stringify(s,null,null,{}))}),t)for(var T in t)t.hasOwnProperty(T)&&(w.prototype[T]=t[T]);E.exports=w}).call(this,x(23))},function(r,t,i){(function(s){var a=i(122),t=i(4),e=i(20),n=i(45);r.exports.connect=function(t,e,n,r){if(void 0!==s&&s.env.STREAM_URL&&!t){var i=/https:\/\/(\w+):(\w+)@([\w-]*).*\?app_id=(\d+)/.exec(s.env.STREAM_URL);t=i[1],e=i[2];var o=i[3];n=i[4],void 0===r&&(r={}),"getstream"!==o&&"stream-io-api"!==o&&(r.location=o)}return new a(t,e,n,r)},r.exports.errors=t,r.exports.request=n,r.exports.signing=e,r.exports.Client=a}).call(this,i(23))},function(t,e){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},c=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};p.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},p.prototype.delete=function(t){delete this.map[l(t)]},p.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},p.prototype.set=function(t,e){this.map[l(t)]=f(e)},p.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},p.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),d(n)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),d(e)},p.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),d(n)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},b.call(m.prototype),b.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},T.error=function(){var t=new T(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];T.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new T(null,{status:e,headers:{location:t}})},t.Headers=p,t.Request=m,t.Response=T,t.fetch=function(n,i){return new Promise(function(r,t){var e=new m(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new T(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=v(e);return e.readAsArrayBuffer(t),n}function _(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=_(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!c(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=y(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=v(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(t,e){var n,r,i=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<u.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function T(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){n(124),t.exports=n(123)}])});