{"ast":null,"code":"import _slicedToArray from \"/Users/ericaong/Desktop/cxa/Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/ericaong/Desktop/cxa/Edge/src/Invest.js\";\nimport React, { useState, useEffect } from 'react'; // import logo from './logo.svg';\n\nimport './Invest.css';\nimport { TransactionContract } from \"./setup\";\nimport { ShowInvest } from \"./ShowInvest\";\nimport io from 'socket.io-client';\n\nfunction Invest(props) {\n  let mainSocket = io('localhost:8080');\n\n  let _useState = useState([{\n    name: \"Swee Boon Keat's Chicken Rice\",\n    amount: 0,\n    frequency: \"Yearly\",\n    duration: 1,\n    returnVal: 0\n  }, {\n    name: \"Julianne's Laksa\",\n    amount: 0,\n    frequency: \"Yearly\",\n    duration: 1,\n    returnVal: 0\n  }, {\n    name: \"Lee's Banmian\",\n    amount: 0,\n    frequency: \"Yearly\",\n    duration: 1,\n    returnVal: 0\n  }, {\n    name: 'ECP Prawn Noodle',\n    amount: 0,\n    frequency: \"Yearly\",\n    duration: 1,\n    returnVal: 0\n  }, {\n    name: 'Sea Rd Rojak',\n    amount: 0,\n    frequency: \"Yearly\",\n    duration: 1,\n    returnVal: 0\n  }]),\n      _useState2 = _slicedToArray(_useState, 2),\n      hawkers = _useState2[0],\n      setHawkers = _useState2[1];\n\n  useEffect(() => {\n    setHawkers(hawkers => hawkers.map(el => {\n      let displayAmount = TransactionContract.totalAmountFor(el.name).toNumber();\n      let displayDuration = TransactionContract.getDuration(el.name).toNumber();\n      let displayFrequency = TransactionContract.getFrequency(el.name).toString();\n      let displayReturnVal = TransactionContract.getReturnValue(el.name).toNumber();\n      console.log(displayAmount, displayDuration, displayFrequency, displayReturnVal);\n      return Object.assign({}, el, {\n        amount: displayAmount,\n        frequency: displayFrequency,\n        duration: displayDuration,\n        returnVal: displayReturnVal\n      });\n    }));\n  }, []);\n\n  let handleOffer = (hawker, amount, duration, frequency, returnValue) => {\n    let displayAmount = TransactionContract.totalAmountFor(hawker).toNumber();\n    let displayDuration = TransactionContract.getDuration(hawker).toNumber();\n    let displayFrequency = TransactionContract.getFrequency(hawker).toString();\n    let displayReturnVal = TransactionContract.getReturnValue(hawker).toNumber();\n    mainSocket.emit('SEND_OFFER', {\n      hawker: hawker,\n      offer: true,\n      returnVal: returnValue,\n      frequency: frequency,\n      duration: duration,\n      amount: amount\n    });\n    setHawkers(hawkers => hawkers.map(el => el.name === hawker ? Object.assign({}, el, {\n      amount: displayAmount,\n      frequency: displayFrequency,\n      duration: displayDuration,\n      returnVal: displayReturnVal\n    }) : el));\n  };\n\n  console.log(\"Invest Page\");\n  return React.createElement(\"div\", {\n    className: \"Invest\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"Invest-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"Invest-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Welcome to Ethereum\")), React.createElement(\"p\", {\n    className: \"Invest-intro\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Transaction in Ethereum\"), React.createElement(\"div\", {\n    className: \"Invest-table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(ShowInvest, {\n    hawkers: hawkers,\n    offer: handleOffer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })));\n}\n\nexport default Invest;","map":{"version":3,"sources":["/Users/ericaong/Desktop/cxa/Edge/src/Invest.js"],"names":["React","useState","useEffect","TransactionContract","ShowInvest","io","Invest","props","mainSocket","name","amount","frequency","duration","returnVal","hawkers","setHawkers","map","el","displayAmount","totalAmountFor","toNumber","displayDuration","getDuration","displayFrequency","getFrequency","toString","displayReturnVal","getReturnValue","console","log","Object","assign","handleOffer","hawker","returnValue","emit","offer"],"mappings":"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","sourcesContent":["import React, { useState , useEffect } from 'react';\n// import logo from './logo.svg';\nimport './Invest.css';\nimport { TransactionContract } from \"./setup\";\nimport {ShowInvest } from \"./ShowInvest\";\nimport io from 'socket.io-client';\n\nfunction Invest (props) {\n\n    let mainSocket = io('localhost:8080')\n\n\n    let [hawkers , setHawkers] = useState([{name:\"Swee Boon Keat's Chicken Rice\",amount:0, frequency:\"Yearly\", duration: 1, returnVal:0}, {name:\"Julianne's Laksa\",amount:0, frequency:\"Yearly\", duration: 1, returnVal:0}, {name:\"Lee's Banmian\",amount:0, frequency:\"Yearly\", duration: 1, returnVal:0}, {name:'ECP Prawn Noodle',amount:0, frequency:\"Yearly\", duration: 1, returnVal:0}, {name:'Sea Rd Rojak',amount:0, frequency:\"Yearly\", duration: 1, returnVal:0}])\n   \n    useEffect(()=>{\n        setHawkers(hawkers => hawkers.map(\n            (el)=>{\n                let displayAmount=TransactionContract.totalAmountFor(el.name).toNumber()\n                \n\n                let displayDuration=TransactionContract.getDuration(el.name).toNumber()\n              \n                let displayFrequency=TransactionContract.getFrequency(el.name).toString()\n              \n                let displayReturnVal=TransactionContract.getReturnValue(el.name).toNumber()\n\n                console.log(displayAmount,displayDuration,displayFrequency,displayReturnVal)\n                return Object.assign({},el,{amount:displayAmount,frequency:displayFrequency,duration: displayDuration, returnVal:displayReturnVal})\n                \n            }\n          \n          ))\n    },[])\n\n\nlet handleOffer = (hawker,amount,duration,frequency,returnValue) => {\n   \n    let displayAmount=TransactionContract.totalAmountFor(hawker).toNumber()\n   \n                \n\n    let displayDuration=TransactionContract.getDuration(hawker).toNumber()\n  \n    let displayFrequency=TransactionContract.getFrequency(hawker).toString()\n  \n    let displayReturnVal=TransactionContract.getReturnValue(hawker).toNumber()\n\n\n    mainSocket.emit('SEND_OFFER', {\n      hawker: hawker,\n      offer:true,\n      returnVal: returnValue,\n      frequency: frequency,\n      duration: duration,\n      amount: amount\n    });\n\n    setHawkers(hawkers => hawkers.map(\n      (el)=>el.name===hawker? Object.assign({},el,{amount:displayAmount,frequency:displayFrequency,duration: displayDuration, returnVal:displayReturnVal}):el\n    \n    ))\n  }\n\n    console.log(\"Invest Page\")\n    return (\n      <div className=\"Invest\">\n        <header className=\"Invest-header\">\n          <h1 className=\"Invest-title\">Welcome to Ethereum</h1>\n        </header>\n        <p className=\"Invest-intro\">\n          Transaction in Ethereum\n        </p>\n        <div className=\"Invest-table\">\n          <ShowInvest hawkers={hawkers} offer={handleOffer}/>\n        </div>\n      </div>\n    );\n}\n\n\nexport default Invest;"]},"metadata":{},"sourceType":"module"}