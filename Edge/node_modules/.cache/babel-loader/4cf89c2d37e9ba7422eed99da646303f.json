{"ast":null,"code":"'use strict';\n\nvar extend = require('../util/extend'),\n    EventEmitter = require('../util/event_emitter');\n\nvar Publisher = {\n  countListeners: function (eventType) {\n    return this.listeners(eventType).length;\n  },\n  bind: function (eventType, listener, context) {\n    var slice = Array.prototype.slice,\n        handler = function () {\n      listener.apply(context, slice.call(arguments));\n    };\n\n    this._listeners = this._listeners || [];\n\n    this._listeners.push([eventType, listener, context, handler]);\n\n    return this.on(eventType, handler);\n  },\n  unbind: function (eventType, listener, context) {\n    this._listeners = this._listeners || [];\n    var n = this._listeners.length,\n        tuple;\n\n    while (n--) {\n      tuple = this._listeners[n];\n      if (tuple[0] !== eventType) continue;\n      if (listener && (tuple[1] !== listener || tuple[2] !== context)) continue;\n\n      this._listeners.splice(n, 1);\n\n      this.removeListener(eventType, tuple[3]);\n    }\n  }\n};\nextend(Publisher, EventEmitter.prototype);\nPublisher.trigger = Publisher.emit;\nmodule.exports = Publisher;","map":null,"metadata":{},"sourceType":"script"}